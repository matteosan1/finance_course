\documentclass{beamer}
%\usetheme{CambridgeUS}

\RequirePackage{etoolbox}
\RequirePackage{tikz}
\usepackage{etoolbox}
\usepackage{tikz}
\usetikzlibrary{calc,positioning}

\RequirePackage{geometry}
\geometry{paperwidth=16cm,paperheight=9cm}

\RequirePackage{caladea,carlito}
\renewcommand{\familydefault}{\sfdefault}

% No navigation symbols
\setbeamertemplate{navigation symbols}{}

\RequirePackage{graphicx,sintefcolor}

\newcommand{\atfootlineauthor}{\insertauthor \enspace$\vert$\enspace}
\newcommand{\atfootlinepayoff}{\atfootlineauthor\inserttitle}
\newcommand{\footlinepayoff}[1]{\renewcommand{\atfootlinepayoff}{#1}}
%Define footline content
\setbeamertemplate{footline}{%
  \begin{beamercolorbox}[wd=\textwidth,ht=5mm,dp=3mm,rightskip=1cm,leftskip=1cm]{footline}
  \insertframenumber/\inserttotalframenumber
  \ifstrempty{\atfootlinepayoff}{}{%
    \usebeamerfont{footline}\hfill\atfootlinepayoff
  }
  \end{beamercolorbox}
}

% Set footline AND coordinate blocks with it
\newcommand{\footlinecolor}[1]{% if #1 is empty, makes footline transparent
  \ifstrempty{#1}{%
    \footlinepayoff{}
    \setbeamercolor{footline}{fg=darkgray, bg=}
    \setbeamercolor{block title}{fg=white,bg=maincolor}
    \setbeamercolor{block body}{fg=white,bg=maincolor}
  }{
    \footlinepayoff{\@footlineauthor\inserttitle}
    \setbeamercolor{footline}{fg=white,bg=#1}
    \setbeamercolor{block title}{fg=white,bg=#1}
    \setbeamercolor{block body}{fg=white,bg=#1}
  }%
}
\footlinecolor{} % Default: no footline

\pgfdeclareimage[width=0.09\paperwidth]{logo}{Logo_Unisi_2012_transp}%assets/logo_RGB}
\pgfdeclareimage[width=0.09\paperwidth]{whitelogo}{Logo_Unisi_2012_transp}%assets/logo_RGB_negative}
\newcommand{\atlogo}{logo}

\newcommand{\themecolor}[1]{
	\ifstrequal{#1}{main}{%
        \setbeamercolor{footline}{fg=white}
		\setbeamercolor{normal text}{fg=white,bg=maincolor}
		\setbeamercolor{structure}{fg=white}
		\renewcommand{\atlogo}{whitelogo}
		\setbeamercolor{block title}{fg=maincolor,bg=sintefgrey}
		\setbeamercolor{block body}{fg=darkgray,bg=sintefgrey}
	}{%
        \setbeamercolor{footline}{fg=darkgray}
		\setbeamercolor{normal text}{fg=darkgray,bg=white}
		\setbeamercolor{structure}{fg=maincolor}
		\renewcommand{\atlogo}{logo}
		\setbeamercolor{block title}{fg=white,bg=maincolor}
		\setbeamercolor{block body}{fg=darkgray,bg=sintefgrey}
	}
}
\themecolor{white} % Default: white theme

\setbeamercolor{title}{fg=maincolor,bg=white}
\setbeamercolor{alerted text}{fg=sintefred}
\setbeamercolor{author}{fg=black}
\setbeamercolor{date}{fg=black}

\setbeamerfont{author}{size=\scriptsize}
\setbeamerfont{date}{size=\tiny}
\setbeamerfont{title}{series=\bfseries}
\setbeamerfont{subtitle}{series=\mdseries,size=\footnotesize}
\setbeamerfont{frametitle}{series=\bfseries}
\setbeamerfont{framesubtitle}{series=\mdseries}
\setbeamerfont{footline}{size=\scriptsize}
\setbeamerfont{block title}{series=\centering\bfseries}

% Code to get prettier boxes
\setbeamertemplate{blocks}[rounded]

% Bullets in several levels
\setbeamertemplate{itemize item}{\textbullet}
\setbeamertemplate{itemize subitem}{\textemdash}
\setbeamertemplate{itemize subsubitem}{\ensuremath{\circ}}

\newenvironment{colorblock}[3][white]{%
	\begingroup
	\setbeamercolor{block title}{fg=#1,bg=#2}
	\setbeamercolor{block body} {fg=#1,bg=#2}
	\begin{block}{#3}
	}{%
	\end{block}
	\endgroup
}

% Put the logo in each slide's top left area
\setbeamertemplate{headline}{\hspace{0.06\textwidth}\pgfuseimage{\atlogo}}

% Define frame title and subtitle layout
\setbeamertemplate{frametitle}{%
  \vspace*{-3.5ex}
  \begin{beamercolorbox}[leftskip=2cm]{frametitle}%
    \usebeamerfont{frametitle}\insertframetitle\\
    \usebeamerfont{framesubtitle}\insertframesubtitle
  \end{beamercolorbox}
}

\def\atcourseLabel{}

\newcommand{\course}[1]{\def\atcourseLabel{#1}}

% Define the title page
\setbeamertemplate{title page}{%
  \vskip0pt plus 1filll%
  % Reposition the box in an inelegant way - but it works!
  \hspace{-12mm}
  \vspace{20mm}
  \begin{beamercolorbox}[wd=0.72\textwidth,sep=10pt,leftskip=8mm]{title}%
    {\usebeamerfont{title}\inserttitle}
  
    {\usebeamerfont{subtitle}\insertsubtitle}

    {\usebeamerfont{subtitle}\atcourseLabel}
    
    {\usebeamerfont{author}\usebeamercolor[fg]{author}\textbf{\insertauthor}}
  
    {\usebeamerfont{date}\usebeamercolor[fg]{date}\insertdate}
  \end{beamercolorbox}
}

% Define slide splitting dimensions (e.g. title and chapter slides)
\newcommand{\TikzSplitSlide}[1]{%
  \rule{0.56\paperwidth}{0pt}%
  \begin{tikzpicture}
    \clip (-0.1\paperwidth,-0.5\paperheight) -- 
          ( 0.5\paperwidth,-0.5\paperheight) -- 
          ( 0.5\paperwidth, 0.5\paperheight) -- 
          ( 0.1\paperwidth, 0.5\paperheight) -- cycle; 
    \node at (0.2\paperwidth,0) {%
      \includegraphics[height=\paperheight]{#1}%
    };
  \end{tikzpicture}
}

\newbool{splittitle}
\newcommand{\atTitleBackground}{}
\newcommand{\titlebackground}{\atifstar{\SplitBackground}{\FullBackground}}
\newcommand{\FullBackground}[1]{\renewcommand{\atTitleBackground}{#1}}
\newcommand{\SplitBackground}[1]{%
	\booltrue{splittitle}%
	\renewcommand{\atTitleBackground}{#1}%
}

%% Overwrite the maketitle command for the title page
%\renewcommand{\maketitle}{
%\begingroup
%  \ifdefempty{\atTitleBackground}{}{% Skip if \atTitleBackground is empty
%    \setbeamertemplate{mpscs}{%background}{%
%      \ifbool{splittitle}{%
%        \TikzSplitSlide{\atTitleBackground}
%      }{% Normal, full-screen background
%        \includegraphics[height=\paperheight]{\atTitleBackground}
%      }
%    }
%  }
%  \begin{frame}%
%  \titlepage%
%  \end{frame}%
%\endgroup
%}

%\makeatletter
%    \newenvironment{withoutheadline}{
%        \setbeamertemplate{headline}[default]
%        \def\beameratentrycode{\vspace*{-\headheight}}
%    }{}
%\makeatother
%
%% Define sectioning and table of contents
%\AtBeginSection[]
%{
%    \begingroup
%    \themecolor{main}
%    \begin{frame}{Table of Contents}
%        \tableofcontents[currentsection]
%    \end{frame}
%    \endgroup
%}
%
%% style of section presented in the table of contents
%\setbeamertemplate{section in toc}{$\blacktriangleright$~\inserttocsection}
%
%% automate subtitle of each frame
%\makeatletter
%    \pretocmd\beameratcheckframetitle{\framesubtitle{\thesection \, \secname}}
%\makeatother
%
%% avoid numbering of frames that are breaked into multiply slides
%\setbeamertemplate{frametitle continuation}{}


\title{Stochastic Processes}
\subtitle{Very Brief Introduction to Stochastic Calculus}
\course{Advanced Financial Modeling}
\author{\href{mailto:matteosan1@gmail.com}{Matteo Sani}}
\begin{document}
\begin{frame}[plain]
    \maketitle
\end{frame}

%{
%\setbeamertemplate{background} 
%{\includegraphics[width=\paperwidth,height=\paperheight]{MyBackground.jpg}}

%\begin{frame}{Outline}
%	\begin{itemize}
%		\item Foundations
%		\begin{itemize}
%			\item Forward rate agreements and Forward rates: the devils is in the details
%			\begin{itemize}
%				\item A detailed proof of the FRA via the Expectation Operator
%			\end{itemize}
%		\end{itemize}
%		\item Interest rate swaps
%		\begin{itemize}
%			\item Basis swaps
%			\item Bonds and Swaps
%		\end{itemize}
%		\item Options in Interest Rates and the Black Model
%		\begin{itemize}
%			\item Caps and Floors
%			\item The valuation: the (ex) standard Black 76 model
%			\item Fixing Black Model: the shifted Lognormal Model
%			\item Swaptions
%			\item Bermudan Swaptions and Callable Bonds
%			\item How traders use Caps\&Floors and Swaptions in Practice
%		\end{itemize}
%	\end{itemize}
%\end{frame}

\begin{frame}{Outline}
	\tableofcontents
\end{frame}

\section{Random Variables}
\begin{frame}{Random Variables}
A variable whose value is a number determined by the outcome of a random experiment is called a \textcolor{red}{random variable}.
\newline

There are two kinds of random variable:
\begin{itemize}
	\item Discrete Random Variable
	\item Continuous Random Variable
\end{itemize}
\end{frame}

\subsection{Properties and Characteristics of Random Variables}
\begin{frame}{Discrete and Continuous Random Variables}
	\begin{block}{Discrete Random Variable} 
		If a random variable takes only a countable number (finite) of values, it is called discrete.
	\end{block}
	
	\small{
	\textbf{Example:} when 3 coins are tossed, the number of heads obtained is the random variable $X$, which assumes the values $\Omega=\{0,1,2,3\}$ ($\Omega$ ia a countable set).}
	\newline
	
	\begin{block}{Continuous Random Variable} 
		A random variable $X$ which can take any value between certain interval is called continuous.
	\end{block}
	
	\small{\textbf{Example:} the height of students in a particular class lies between 160 and 190~cm $(X = \{x|160 \leq x \leq 190\})$.}
	\begin{tikzpicture}[remember picture,overlay]
		\node[xshift=5cm,yshift=-3.7cm] (image) at (current page.center) {\includegraphics[width=20px]{python_logo}};
		\node[align = center, yshift=1.45cm, below=of image] {\tiny{\href{shorturl.at/JR059}{shorturl.at/JR059}}};
	\end{tikzpicture}
\end{frame}

\begin{frame}{Probability Distribution}
Let $X$ be a random variable defined on a domain $\Omega$ of possible outcomes. 
\renewcommand{\arraystretch}{1.4}
\begin{table}[bt]
	\begin{tabular}{|c|c|} \hline
		\textbf{Discrete} & \textbf{Continuous} \\ \hline
		Probability Mass & Probability Density \\ \hline		
		\multicolumn{2}{|c|}{$f(x) = P(X=x)\;\forall x\in\Omega$}\\ \hline
		$P_i \geq 0;\;\forall i$ & $f(x) \geq 0;\;-\infty < x < \infty$\\ \hline
		$\sum_{i=0}^{n} P_i = 1$ & $\int_{-\infty}^{\infty} f(x) dx = 1$\\ \hline
		\multicolumn{2}{|c|}{Cumulative Distribution} \\ \hline
		$F(x) = P(X<x_i) = \sum_{x_i<x} P_i$ & $F(x) = P(X<a) = \int_{-\infty}^{a} f(x) dx$ \\ \hline
	\end{tabular}
\end{table}
\end{frame}

\begin{frame}{Characterizing a Random Variable}
	If we know the distribution of a random variable, we pretty much know all there is to know about it. 
	\newline
	\begin{columns}
		\column{0.45\linewidth}
		\includegraphics[height=3cm]{continouos_random_variable}
		\column{0.45\linewidth} 
		\includegraphics[height=3 cm]{real_data}
	\end{columns}

But with real data, we don't know the full distribution. So we want to characterize it by a couple of numbers (\emph{statistics}).
\footnotesize{
	\begin{itemize}
		\item mean, $\mu = \mathbb{E}[X] = \int_{-\infty}^{\infty} xf(x)dx$
		\item variance, 
		$\sigma^2 = \mathbb{E}[(X-\mu)^2] =\int_{-\infty}^{\infty} (x-\mu)^2f(x)dx$,
\end{itemize}}
\end{frame}

\subsection{Expectation and Its Properties}
\begin{frame}{Properties of Expectation}
	\renewcommand{\arraystretch}{1.4}
	\footnotesize{\tiny {\tiny }}{
	\begin{table}[bt]
		\begin{tabular}{|c|c|} \hline
Scalar multiplication & $\mathbb{E}[aX] = a\mathbb{E}[X]$ \\ \hline
Sums & $\mathbb{E}[X_1+\ldots X_K] =  \mathbb{E}[X_1] +\ldots + \mathbb{E}[X_n]$ \\ \hline
Linear combinations & $\mathbb{E}[a_1X_1+\ldots a_KX_K] =  a_1\mathbb{E}[X_1] +\ldots + a_K\mathbb{E}[X_K]$ \\ \hline
Expected value of a constant & $\mathbb{E}[a] = a$ \\ \hline
Products (independent variables) & $\mathbb{E}[XY] = \mathbb{E}[X] \mathbb{E}[Y]$ \\ \hline
		\end{tabular}
	\end{table}
}
\end{frame}

\section{Stochastic Processes}
\begin{frame}{Stochastic Process}
Real world data is noisy (i.e. distorted), and exhibits behaviours that cannot be described by a deterministic model (always produce same result from same inputs).
\newline

\begin{tabular}{cl}  
	\begin{tabular}{c}
		\includegraphics[height=3cm]{stochastic_process}
	\end{tabular}
	& \begin{tabular}{l}
		\parbox{0.45\linewidth}{
			Need to switch to \textcolor{red}{stochastic processes} in order to model the uncertainty of data.  
		}
	\end{tabular}  \\
\end{tabular}
\begin{block}{Stochastic process}
A collection of random variables that is indexed by some mathematical set (usually time).
\end{block}
\end{frame}

\subsection{SDE}
\begin{frame}{Stochastic Process}
	
Stochastic processes are described by \emph{stochastic differential equation} (SDE):

\begin{equation*}
\begin{aligned}
dX(t) = \mu(t,X(t)) dt &+ \sigma(t,X(t)) dW(t) \\  & =\underbrace{\mu(t,X(t))dt}_{\textrm{deterministic}} + \underbrace{\sigma(t,X(t)) \mathcal{N}(0,1)\sqrt{dt}}_{\textrm{stochastic}}
\end{aligned}
\end{equation*}

\begin{tabular}{cl}  
	\begin{tabular}{c}
		\includegraphics[height=3.2cm]{brownian_process}
	\end{tabular}
	& \begin{tabular}{l}
		\parbox{0.45\linewidth}{
			\begin{itemize}
				\item The mean of $dW$ is zero and its variance is $dt$
				\item the standard deviation grows with the square root of time: $W(t) \simeq \mathcal{N}(0, t)$ because each $dW$ is distributed like independent standard Gaussian.
			\end{itemize}  
		}
	\end{tabular}  \\
\end{tabular}
\end{frame}

\subsection{Martingales}
\begin{frame}{Martingale}
\begin{block}{Definition}
A \textcolor{red}{martingale} is a (integrable and adapted) stochastic process which models a fair game with the following remarkable feature
\begin{equation}
\mathbb{E}[X_t|\mathcal{F}_s] = X_s
\end{equation}
so the best prediction for the future value $X_t$, given the knowledge $\mathcal{F}_s$ at time $s$ is the value at time $s$ itself, $X_s$.
\end{block}
\end{frame}

\subsection{Martingales}
\begin{frame}{Martingale}
	\begin{block}{Properties}
		If $X_t$ is a stochastic process with volatility $\sigma_t$, which satisfies $\mathbb{E}[(\int_0^T\sigma^2_s ds)^{\frac{1}{2}}]<\infty$, and SDE $dX_t=\sigma_t dW_t+\mu_t dt$ 
		\begin{equation*}
			X\text{ is a martingale } \iff X\text{ is drift-less } (\mu_t=0)
		\end{equation*}
	\end{block}	
A martingale corresponds to the common notion that "an efficient price, changes randomly" so we cannot know if it will go up or down. That is why this mathematical concept is brought into finance.

	\begin{tikzpicture}[remember picture,overlay]
		\node[xshift=-5cm,yshift=-3.7cm] (image) at (current page.center) {\includegraphics[width=20px]{python_logo}};
		\node[align = center, yshift=1.45cm, below=of image] {\tiny{\href{shorturl.at/knyGT}{shorturl.at/knyGT}}};
	\end{tikzpicture}
\end{frame}

\subsection{Geometric Brownian Motion (GBM)}
\begin{frame}{Geometric Brownian Motion}
\begin{itemize}
	\item Trade random fluctuations deviate a stock price $S_t$ from a steady state.
	\item The price relative change in $dt$ can be decomposed into two parts
	\begin{itemize}
		\item \emph{deterministic}: the expected return from holding the stock during $dt$. It can be expressed as $\mu S_tdt$ (with $\mu$ being the expected rate of return);
		\item \emph{stochastic}: model the random changes of the market. A reasonable assumption is to equal this term to $\sigma S_t dW_t$. 
	\end{itemize}
	\item Putting all together, the resulting SDE is
	\begin{equation}
		\begin{gathered}
		dS_t = \mu S_t dt + \sigma S_t dW_t \\
		\frac{dS_t}{S_t} = d\log(S_t) = \mu dt + \sigma dW_t
		\end{gathered}
		\label{eq:log_normal_sde}
	\end{equation}
\end{itemize}
\end{frame}

\subsubsection{Ito's Lemma}
\begin{frame}{Ito's Lemma}
	\begin{block}{Ito's Lemma}
	For any given continuous and differentiable function $G(S,t)$ where S satisfies $dS=adt + bdW_t$, holds
	\begin{equation}
	dG = \left(a\frac{\partial G}{\partial S} + \frac{\partial G}{\partial t} + \underbrace{\frac{1}{2}b^2\frac{\partial^2 G}{\partial S^2}}_{\text{additional term}}\right)dt + b\frac{\partial G}{\partial S} dW
	\label{eq:itos_lemma}
	\end{equation}
	\end{block}

	This is essentially an extension of the \emph{Taylor series} for stochastic functions, in the expansion an extra ($2^{nd}$ order) term appears.
\end{frame}

\begin{frame}{Geometric Brownian Motion}
	\begin{itemize}
		\item So setting $G=\log(S_t)$ 
		\begin{equation*}
			\frac{\partial G}{\partial S}=\frac{1}{S_t},\;\frac{\partial G}{\partial t}=0,\;\frac{\partial^2 G}{\partial S^2}=-\frac{1}{S_t^2}
		\end{equation*}
		\item Substituting back into Ito's lemma Eq.~\ref{eq:itos_lemma} and taking $a$ and $b$ values from Eq.~\ref{eq:log_normal_sde}
		\begin{equation}
			\begin{gathered}
			d(\log S_t) = \left(\mu S_t\frac{1}{S_t} + \frac{1}{2}\sigma^2S_t^2\left(-\frac{1}{S_t^2}\right)\right)dt + \sigma dW \\
			\log(S_t) - \log(S_{t-1}) = \log\frac{S_t}{S_{t-1}}=\left(\mu - \frac{1}{2}\sigma^2\right)dt + \sigma dW \\
			S_t = S_{t-1}\exp\left[\left(\mu-\frac{1}{2}\sigma^2\right)dt + \sigma\mathcal{N}(0,1)\sqrt{dt}\right] 
			\end{gathered}
		\end{equation}
	\end{itemize}
\end{frame}

\subsubsection{Log-normality}
\begin{frame}{Log-normality}
\begin{itemize}
	\item The variation in $\log(S_t)$ equals a constant (the \emph{drift} $\mu-\frac{1}{2}\sigma^2$) plus a Gaussian distributed random variable. Therefore at some time $t$
	\begin{equation*}
		\log S_t = \mathcal{N}\left[\left(\mu -\frac{\sigma^2}{2}\right)t, \sigma^2 t\right]
	\end{equation*}
\end{itemize}
\begin{block}{Log-normal Variable}
A random variable whose logarithm is normally distributed is said to be \textcolor{red}{log-normal}.

One of the most important properties of a log-normal distribution is to be positive definite (a good characteristic for stock prices).
\end{block}
\begin{tikzpicture}[remember picture,overlay]
	\node[xshift=5cm,yshift=-3.7cm] (image) at (current page.center) {\includegraphics[width=20px]{python_logo}};
	\node[align = center, yshift=1.45cm, below=of image] {\tiny{\href{shorturl.at/jovCST}{shorturl.at/jovCS}}};
\end{tikzpicture}
\end{frame}

\end{document}




