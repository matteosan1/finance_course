\usepackage{exsheets}
\SetupExSheets{counter-format=ch.qu}

\usepackage{afterpage}
\usepackage{geometry}
\usepackage[most]{tcolorbox}
\newtcolorbox{attention}{breakable,enhanced,arc=0mm,colback=cream,colframe=goldenrod,leftrule=12mm,
	overlay={\node[anchor=north west,outer sep=2pt] at (frame.north west) {\includegraphics[width=8mm]{figures/alert.png}}; }}
\newtcolorbox{curiosity}{breakable,enhanced,arc=0mm,colback=lime,colframe=green,leftrule=12mm,
	overlay={\node[anchor=north west,outer sep=2pt] at (frame.north west) {\includegraphics[width=8mm]{figures/curiosity.png}}; }}
\newtcolorbox{finmarkets}{breakable,enhanced,arc=0mm,colback=sky,colframe=rahmen,leftrule=12mm,
	overlay={\node[anchor=north west,outer sep=2pt] at (frame.north west) {\includegraphics[width=8mm]{figures/python_logo.png}}; }}

%\usepackage{amssymb}
\usepackage{amsfonts} % for expectation and other chars
\usepackage{eurosym} % defines \euro

\usepackage{xcolor}
\definecolor{mandellightgreen}{rgb}{0.77, 0.82, 0.73}
\definecolor{mandelpantone}{rgb}{0.2, 0.11, 0.27}
\definecolor{ipython-frame}{RGB}{207, 207, 207}
\definecolor{ipython-bg}{RGB}{247, 247, 247}
\definecolor{ipython-red}{RGB}{186, 33, 33}
\definecolor{ipython-green}{RGB}{0, 128, 0}
\definecolor{ipython-cyan}{RGB}{64, 128, 128}
\definecolor{ipython-purple}{RGB}{170, 34, 255}
\definecolor{cream}{RGB}{255,229,153}
\definecolor{goldenrod}{RGB}{218,165,32}
\definecolor{sky}{RGB}{150, 195, 255}
\definecolor{rahmen}{RGB}{0,73,114}

\usepackage{hyperref}

\providecommand{\tightlist}{\setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}

\usepackage{subfig} %for subfloat

\usepackage{cprotect}
%%%\AtBeginEnvironment{lstlisting}{
%%\renewcommand\ttfamily{\fontfamily{pcr}\selectfont}%}
\lstdefinelanguage{iPython} {
	morekeywords={access,and,del,except,exec,in,is,lambda,not,or,raise},
	morekeywords=[2]{for,print,abs,all,any,basestring,bin,bool,bytearray,callable,chr,classmethod,cmp,compile,complex,delattr,dict,dir,divmod,enumerate,eval,execfile,file,filter,float,format,frozenset,getattr,globals,hasattr,hash,help,hex,id,input,int,isinstance,issubclass,iter,len,list,locals,long,map,max,memoryview,min,next,object,oct,open,ord,pow,property,range,reduce,reload,repr,reversed,round,set,setattr,slice,sorted,staticmethod,str,sum,super,tuple,type,unichr,unicode,vars,xrange,zip,apply,buffer,coerce,intern,elif,else,if,continue,break,while,class,def,return,try,except,import,finally,try,except,from,global,pass, True, False},
	sensitive=true,
	morecomment=[l]\#,%
	morestring=[b]',%
	morestring=[b]",%
	moredelim=**[is][\color{black}]{@@}{@@},
	identifierstyle=\color{black}\footnotesize\ttfamily,
    commentstyle=\color{ipython-cyan}\footnotesize\itshape\ttfamily,
	stringstyle=\color{ipython-red}\footnotesize\ttfamily,
	keepspaces=true,
	showspaces=false,
    showstringspaces=false,
	rulecolor=\color{ipython-frame},
	frame=single,
	frameround={t}{t}{t}{t},
	framexleftmargin=6mm,
	numbers=left,
	numberstyle=\color{ipython-cyan},
	backgroundcolor=\color{ipython-bg},
	basicstyle=\footnotesize\ttfamily,
	keywordstyle=[2]\color{ipython-green}\bfseries\footnotesize\ttfamily, 
	keywordstyle=\color{ipython-purple}\bfseries\footnotesize\ttfamily
}

\lstdefinelanguage{iPythonnonumbers} {
	morekeywords={access,and,del,except,exec,in,is,lambda,not,or,raise},
	morekeywords=[2]{for,print,abs,all,any,basestring,bin,bool,bytearray,callable,chr,classmethod,cmp,compile,complex,delattr,dict,dir,divmod,enumerate,eval,execfile,file,filter,float,format,frozenset,getattr,globals,hasattr,hash,help,hex,id,input,int,isinstance,issubclass,iter,len,list,locals,long,map,max,memoryview,min,next,object,oct,open,ord,pow,property,range,reduce,reload,repr,reversed,round,set,setattr,slice,sorted,staticmethod,str,sum,super,tuple,type,unichr,unicode,vars,xrange,zip,apply,buffer,coerce,intern,elif,else,if,continue,break,while,class,def,return,try,except,import,finally,try,except,from,global,pass, True, False},
	sensitive=true,
	morecomment=[l]\#,%
	morestring=[b]',%
	morestring=[b]",%
	moredelim=**[is][\color{black}]{@@}{@@},
	identifierstyle=\color{black}\footnotesize\ttfamily,
	commentstyle=\color{ipython-cyan}\footnotesize\itshape\ttfamily,
	stringstyle=\color{ipython-red}\footnotesize\ttfamily,
	keepspaces=true,
	showspaces=false,
	showstringspaces=false,
	rulecolor=\color{ipython-frame},
	frame=single,
	frameround={t}{t}{t}{t},
	framexleftmargin=6mm,
	%numbers=left,
	%numberstyle=\color{ipython-cyan},
	backgroundcolor=\color{ipython-bg},
	%   extendedchars=true,
	basicstyle=\footnotesize\ttfamily,
	keywordstyle=[2]\color{ipython-green}\bfseries\footnotesize\ttfamily, 
	keywordstyle=\color{ipython-purple}\bfseries\footnotesize\ttfamily
}

\lstdefinelanguage{iOutput} {
	sensitive=true,
	identifierstyle=\color{black}\small\ttfamily,
	stringstyle=\color{ipython-red}\small\ttfamily,
	keepspaces=true,
	showspaces=false,
	showstringspaces=false,
	rulecolor=\color{ipython-frame},
	%frame=single,
	%frameround={t}{t}{t}{t},
	%backgroundcolor=\color{ipython-bg},
	basicstyle=\small\ttfamily,
}

\lstdefinestyle{mycpp}{language=C++,
	basicstyle=\small\ttfamily,
	showstringspaces=false,
	keywordstyle=\small\color{blue}\ttfamily,
	stringstyle=\small\color{red}\ttfamily,
	commentstyle=\small\color{green}\ttfamily,
	rulecolor=\color{ipython-frame},
	frame=single,
	frameround={t}{t}{t}{t},
	backgroundcolor=\color{ipython-bg},
	morecomment=[l][\color{magenta}]{\#}
}

\lstdefinestyle{attstyle}{
	backgroundcolor=\color{cream},
	rulecolor=\color{goldenrod}
}

\lstnewenvironment{attpython}[1][]{
	\lstset{language=iPython,style=attstyle,mathescape=true}
}{%
}

%\lstset{style=mystyle}
\lstnewenvironment{ipython}[1][]{\lstset{language=iPython,mathescape=true,escapeinside={*@}{@*}}%
}{%
}

\lstnewenvironment{ioutput}[1][]{\lstset{language=iOutput,mathescape=true,escapeinside={*@}{@*}}%
}{%
}

\newcommand{\pythoncode}[1]{
    \lstinputlisting[language=iPython,mathescape=true,escapeinside={*@}{@*}]{#1}
}

\newcommand{\pythoncodenon}[1]{
    \lstinputlisting[language=iPythonnonumbers,style=attstyle,mathescape=true,escapeinside={*@}{@*}]{#1}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%5

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%\usepackage[T1]{fontenc}
%
%\usepackage{cancel}
%
%\usepackage{cellspace}
%\setlength\cellspacetoplimit{4pt}
%\setlength\cellspacebottomlimit{4pt}
%\usepackage{makecell}
%\setcellgapes{4pt}
%
%\usepackage{tabularx}
%
%\usepackage{graphicx}
%
%%\usepackage{wrapfigure}
%
%\makeatletter
%\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth
%  \else\Gin@nat@width\fi}
%\makeatother
%\let\Oldincludegraphics\includegraphics
%
%\usepackage{caption}
%%\usepackage{adjustbox}
%

%
%\usepackage{amsmath}

%\usepackage{bbold}
%\DeclareMathAlphabet{\mathmybb}{U}{bbold}{m}{n}
%\newcommand{\1}{\mathmybb{1}}
%
%%\usepackage{textcomp}
%%\AtBeginDocument{%
%%  \def\PYZsq{\textquotesingle}% Upright quotes in Pygmentized code
%%}
%\usepackage{upquote}

%\usepackage[mathletters]{ucs}
%
%%\usepackage[utf8x]{inputenc} % Allow utf-8 characters in the tex document
%\usepackage{fancyvrb}
%\usepackage{fancyhdr}
%\fancyhead[L,C]{}
%\fancyhead[R]{\textbf{The performance of new graduates}}
%\fancyfoot[L]{From: K. Grant}
%\fancyfoot[C]{To: Dean A. Smith}
%\fancyfoot[R]{\thepage}
%\renewcommand{\headrulewidth}{0.4pt}
%\renewcommand{\footrulewidth}{2pt}
%
%\usepackage{grffile}

%\usepackage{longtable}
%\usepackage{booktabs}
%\usepackage[inline]{enumitem}
%\usepackage[normalem]{ulem}
%\usepackage{mathrsfs}
%\usepackage{array}
%\usepackage{ltablex}
%\usepackage{setspace}
%\usepackage{etoolbox}
%\AtBeginEnvironment{quote}{\par\singlespacing\small}
%

%\definecolor{ansi-black}{HTML}{3E424D}
%\definecolor{ansi-black-intense}{HTML}{282C36}
%\definecolor{ansi-red}{HTML}{E75C58}
%\definecolor{ansi-red-intense}{HTML}{B22B31}
%\definecolor{ansi-green}{HTML}{00A250}
%\definecolor{ansi-green-intense}{HTML}{007427}
%\definecolor{ansi-yellow}{HTML}{DDB62B}


%\definecolor{ansi-yellow-intense}{HTML}{B27D12}
%\definecolor{ansi-blue}{HTML}{208FFB}
%\definecolor{ansi-blue-intense}{HTML}{0065CA}
%\definecolor{ansi-magenta}{HTML}{D160C4}
%\definecolor{ansi-magenta-intense}{HTML}{A03196}
%\definecolor{ansi-cyan}{HTML}{60C6C8}
%\definecolor{ansi-cyan-intense}{HTML}{258F8F}
%\definecolor{ansi-white}{HTML}{C5C1B4}
%\definecolor{ansi-white-intense}{HTML}{A1A6B2}
%\definecolor{ansi-default-inverse-fg}{HTML}{FFFFFF}
%\definecolor{ansi-default-inverse-bg}{HTML}{000000}
%\definecolor{cellbackground}{HTML}{F7F7F7}
%\definecolor{incolor}{rgb}{0.0, 0.0, 0.5}
%\definecolor{outcolor}{rgb}{0.545, 0.0, 0.0}
%\definecolor{cellborder}{HTML}{CFCFCF}
%\definecolor{grund}{RGB}{238,241,251}          
%\definecolor{schrift}{RGB}{0,73,114}


%\definecolor{Dark}{gray}{0.2}
%\definecolor{MedDark}{gray}{0.4}
%\definecolor{Medium}{gray}{0.6}
%\definecolor{Light}{gray}{0.8}
%\definecolor{lime}{RGB}{220,255,198}

%\definecolor{emerald-green}{RGB}{2, 143, 30}

%%
%
%\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
%
%%\font\myfont=cmr12 at 40pt
%%\title{{\myfont Financial Numerical Recipes\\} \vspace{1 cm} \myfont{(With Python Applications)}}
%%\font\anothermyfont=cmr12 at 20pt
%%\author{\\ {\anothermyfont Matteo Sani} \\ \\ \\ Quants Staff - MPS Capital Services \\\href{mailto:matteo.sani@mpscapitalservices.it}{matteo.sani@mpscapitalservices.it}}     
%%\date{\vspace{-5ex}}
%%\usepackage[margin=1in]{geometry}
%

%\usepackage{tikz}
%\usetikzlibrary{fadings}
%
%\sloppy 
%% Setup hyperref package
%\hypersetup{
%  breaklinks=true,  % so long urls are correctly broken across lines
%  colorlinks=true,
%  urlcolor=rahmen,
%  linkcolor=rahmen,
%  citecolor=rahmen,
%}
%%\hypersetup{linkcolor=rahmen}
%
%% Slightly bigger margins than the latex defaults
%
%\geometry{verbose,tmargin=1in,bmargin=1in,lmargin=1in,rmargin=1in}
%
    
%\newtcolorbox{codebox}{breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder}
%


%\usepackage{sectsty}
%\usepackage{titlesec}
%\chapterfont{\color{rahmen}}
%\subsectionfont{\color{rahmen}}
%\subsubsectionfont{\color{rahmen}}
%\titleformat{\section}
%  {\normalfont\Large\bfseries\color{rahmen}}{\textcolor{rahmen}\thesection}{1em}{}[\textcolor{rahmen}{\titlerule[0.8pt]}]
%
%\patchcmd{\thebibliography}{\chapter*}{\section*}{}{}
%
%\usepackage{ifthen}

%\definecolor{maroon}{cmyk}{0, 0.87, 0.68, 0.32}
%\definecolor{halfgray}{gray}{0.55}
