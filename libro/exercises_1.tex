\chapter{Introduction to $\tt{python}$}\label{introduction-to-python---lesson-1}

\begin{Exercise}[label={pippo}]
What is the built-in function that \(\tt{python}\) uses to iterate over a number sequence ? Write an example that uses it.
\end{Exercise}

\begin{Answer}
The built-in function used to iterate over a sequence of numbers is
\(\tt{range}\). It returns a sequence of numbers taking three parameters
that represents respectively the lower boundary of the sequence, the
upper boundary of the sequence and the step. If just one parameter is
passed the default lower boundary is 0 and the step is 1. Note that the
upper boundary is excluded from the sequence.

\begin{tcolorbox}[size=fbox, boxrule=1pt, colback=cellbackground, colframe=cellborder]
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{,} \PY{l+m+mi}{20}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{)}\PY{p}{:}
    \PY{n+nb}{print} \PY{p}{(}\PY{n}{i}\PY{p}{)}

10
12
14
16
18
\end{Verbatim}
\end{tcolorbox}

\begin{tcolorbox}[size=fbox, boxrule=1pt, colback=cellbackground, colframe=cellborder]
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{)}\PY{p}{:}
    \PY{n+nb}{print} \PY{p}{(}\PY{n}{i}\PY{p}{)}

0
1
2
3
4
\end{Verbatim}
\end{tcolorbox}
\end{Answer}

\begin{Exercise}{}
What is a string in \(\tt{python}\) ? Declare one string variable and try to manipulate it (concatenate, make uppercase, capitalize, replace characters, split...).
\end{Exercise}

\begin{Answer}
A string is simply a sequence of characters.

\begin{tcolorbox}[size=fbox, boxrule=1pt, colback=cellbackground, colframe=cellborder]
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{aString} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{this is a string}\PY{l+s+s2}{\PYZdq{}}
  
\PY{n}{aString} \PY{o}{=} \PY{n}{aString} \PY{o}{+} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{, just an example}\PY{l+s+s2}{\PYZdq{}}
\PY{n+nb}{print} \PY{p}{(}\PY{n}{aString}\PY{p}{)}
this is a string, just an example

\PY{n+nb}{print} \PY{p}{(}\PY{n}{aString}\PY{o}{.}\PY{n}{upper}\PY{p}{(}\PY{p}{)}\PY{p}{)}
'THIS IS A STRING, JUST AN EXAMPLE'

\PY{n+nb}{print} \PY{p}{(}\PY{n}{aString}\PY{o}{.}\PY{n}{capitalize}\PY{p}{(}\PY{p}{)}\PY{p}{)}
'This is a string, just an example'

\PY{n+nb}{print} \PY{p}{(}\PY{n}{aString}\PY{o}{.}\PY{n}{replace}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{just an}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{for}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}\PY{p}{)}
'this is a string, for example'

\PY{n+nb}{print} \PY{p}{(}\PY{n}{aString}\PY{o}{.}\PY{n}{split}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{,}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}\PY{p}{)}
['this is a string', ' just an example']

\PY{k}{if} \PY{p}{(}\PY{n}{aString}\PY{o}{.}\PY{n}{endswith}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{example}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}\PY{p}{)}\PY{p}{:}
    \PY{n+nb}{print} \PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{This string is really an example.}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\PY{k}{else}\PY{p}{:}
    \PY{n+nb}{print} \PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{This string is not an example}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
This string is really an example.
\end{Verbatim}
\end{tcolorbox}
\end{Answer}

\begin{Exercise}
What does the continue do in \(\tt{python}\) ? Show an example of its usage printing all the odd numbers between 0 and 10.
\end{Exercise}

\begin{Answer}
\(\tt{continue}\) is used to skip cycles in for loops. Note that \% is
the module operator, it returns the reminder of a division.

\begin{tcolorbox}[size=fbox, boxrule=1pt, colback=cellbackground, colframe=cellborder]
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}\PY{p}{:}
    \PY{k}{if} \PY{n}{i}\PY{o}{\PYZpc{}}\PY{k}{2} == 0:
        \PY{k}{continue}
    \PY{k}{else}\PY{p}{:}
        \PY{n+nb}{print} \PY{p}{(}\PY{n}{i}\PY{p}{)}

1
3
5
7
9
\end{Verbatim}
\end{tcolorbox}
\end{Answer}

\begin{Exercise}
When should you use the break in \(\tt{python}\) ? Show an example of its usage.
\end{Exercise}

\begin{Answer}
\(\tt{break}\) is the command used to interrupt a while loop even if the
while condition is still satisfied.

\begin{tcolorbox}[size=fbox, boxrule=1pt, colback=cellbackground, colframe=cellborder]
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{i} \PY{o}{=} \PY{l+m+mi}{0}
\PY{k}{while} \PY{n}{i} \PY{o}{\PYZlt{}} \PY{l+m+mi}{11}\PY{p}{:}
    \PY{k}{if} \PY{p}{(}\PY{n}{i}\PY{o}{/}\PY{l+m+mi}{2} \PY{o}{\PYZgt{}} \PY{l+m+mi}{3}\PY{p}{)}\PY{p}{:}
        \PY{k}{break}
    \PY{n+nb}{print} \PY{p}{(}\PY{n}{i}\PY{p}{)}
    \PY{n}{i} \PY{o}{=} \PY{n}{i} \PY{o}{+} \PY{l+m+mi}{1}

0
1
2
3
4
5
6
\end{Verbatim}
\end{tcolorbox}  
\end{Answer}

\begin{Exercise}
Which \(\tt{python}\) function will you use to convert a number to a string ? Show an example.
\end{Exercise}

\begin{Answer}
\(\tt{str()}\) is the correct function to use in order to cast a number
to a string.

\begin{tcolorbox}[size=fbox, boxrule=1pt, colback=cellbackground, colframe=cellborder]
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{x} \PY{o}{=} \PY{l+m+mf}{2.34}
\PY{n+nb}{print} \PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{This }\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s2}{ is of type }\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s2}{\PYZdq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n}{x}\PY{p}{,} \PY{n+nb}{type}\PY{p}{(}\PY{n}{x}\PY{p}{)}\PY{p}{)}\PY{p}{)}
\PY{n+nb}{print} \PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{This }\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s2}{ is of type }\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s2}{\PYZdq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n+nb}{str}\PY{p}{(}\PY{n}{x}\PY{p}{)}\PY{p}{,} \PY{n+nb}{type}\PY{p}{(}\PY{n+nb}{str}\PY{p}{(}\PY{n}{x}\PY{p}{)}\PY{p}{)}\PY{p}{)}\PY{p}{)}

This 2.34 is of type <class 'float'>
This 2.34 is of type <class 'str'>
\end{Verbatim}
\end{tcolorbox}  
\end{Answer}

\begin{Exercise}
Import the math module and compute the logarithm of 2.09, the exponential of 1.57 and the area of a circle of radius 6 cm (circle area = $\pi \cdot r^2$).
\end{Exercise}

\begin{Answer}
\begin{tcolorbox}[size=fbox, boxrule=1pt, colback=cellbackground, colframe=cellborder]
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k+kn}{import} \PY{n+nn}{math}

\PY{n+nb}{print} \PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{log(2.09) = }\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s2}{\PYZdq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n}{math}\PY{o}{.}\PY{n}{log}\PY{p}{(}\PY{l+m+mf}{2.09}\PY{p}{)}\PY{p}{)}\PY{p}{)}
\PY{n+nb}{print} \PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{exp(1.57) = }\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s2}{\PYZdq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n}{math}\PY{o}{.}\PY{n}{exp}\PY{p}{(}\PY{l+m+mf}{1.57}\PY{p}{)}\PY{p}{)}\PY{p}{)}
\PY{n+nb}{print} \PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{area of circle (R=6cm) is about }\PY{l+s+si}{\PYZob{}:.2f\PYZcb{}}\PY{l+s+s2}{ cm2}\PY{l+s+s2}{\PYZdq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n}{math}\PY{o}{.}\PY{n}{pi}\PY{o}{*}\PY{l+m+mi}{6}\PY{o}{*}\PY{o}{*}\PY{l+m+mi}{2}\PY{p}{)}\PY{p}{)}

log(2.09) = 0.7371640659767196
exp(1.57) = 4.806648193775178
area of circle (R=6cm) is about 113.10 cm2
\end{Verbatim}
\end{tcolorbox}
\end{Answer}

\begin{Exercise}[label={ex:BS1}]
Given the following variables

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{S_t }\OperatorTok{=} \FloatTok{800.0} \CommentTok{# spot price of the underlying}
\NormalTok{K }\OperatorTok{=} \FloatTok{600.0} \CommentTok{# strike price}
\NormalTok{vol }\OperatorTok{=} \FloatTok{0.25} \CommentTok{# volatility}
\NormalTok{r }\OperatorTok{=} \FloatTok{0.01} \CommentTok{# interest rate}
\NormalTok{ttm }\OperatorTok{=} \FloatTok{0.5} \CommentTok{# time to maturity, in years}
\end{Highlighting}
\end{Shaded}

write out the Black Scholes formula and save the value of a call in a variable named `call\_price' and the value of a put in a variable named `put\_price'.

\textbf{Hint:} remember that there are many modules available in python that let you save a lot of time. In this case we need the cumulative distribution function of the standard normal distribution which can be found in \texttt{scipy.stats} module, the name of the function is \texttt{norm}.
\end{Exercise}

\begin{Answer}
The BS equation for the price of a call is:

\[ C(S, t) = S_tN(d_1)-Ke^{-r(T-t)}N(d_2) \]

where
\begin{itemize}
\item \(S_t\) is the spot price of the underlying
\item \(K\) is the strike price
\item \(r\) is the risk-free interest rate (expressed in terms of continuous compounding)
\item \(N(\cdot)\) is the cumulative distribution function of the standard normal distribution
\item \(T - t\) is the time to maturity
\item \(\sigma\) is the volatility of the underlying
\end{itemize}

\[\begin{split}
d_1 & = \cfrac{\mathrm{ln}(\cfrac{S_t}{K}) + (r + \cfrac{1}{2}\sigma^{2})(T-t)}{\sigma\sqrt{T-t}}\\ \\
d_2 & = d_1 - \sigma\sqrt{T-t}\\
\end{split}\]

\vfill
\begin{tcolorbox}[before skip=\baselineskip,enhanced,breakable, size=fbox, boxrule=1pt, colback=cellbackground, colframe=cellborder]
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k+kn}{from} \PY{n+nn}{math} \PY{k}{import} \PY{n}{log}\PY{p}{,} \PY{n}{exp}\PY{p}{,} \PY{n}{sqrt}
\PY{c+c1}{\PYZsh{} You\PYZsq{}ll need the Gaussian cumulative distribution function}
\PY{k+kn}{from} \PY{n+nn}{scipy}\PY{n+nn}{.}\PY{n+nn}{stats} \PY{k}{import} \PY{n}{norm}

\PY{n}{S\PYZus{}t} \PY{o}{=} \PY{l+m+mf}{800.0}
\PY{n}{ttm} \PY{o}{=} \PY{l+m+mf}{0.5}
\PY{n}{K} \PY{o}{=} \PY{l+m+mf}{600.0}
\PY{n}{vol} \PY{o}{=} \PY{l+m+mf}{0.25}
\PY{n}{r} \PY{o}{=} \PY{l+m+mf}{0.01}

\PY{n}{d1\PYZus{}num} \PY{o}{=} \PY{p}{(}\PY{n}{log}\PY{p}{(}\PY{n}{S\PYZus{}t}\PY{o}{/}\PY{n}{K}\PY{p}{)}\PY{o}{+}\PY{p}{(}\PY{n}{r}\PY{o}{+}\PY{l+m+mf}{0.5}\PY{o}{*}\PY{n+nb}{pow}\PY{p}{(}\PY{n}{vol}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{)}\PY{p}{)}\PY{o}{*}\PY{n}{ttm}\PY{p}{)}
\PY{n}{d1\PYZus{}den} \PY{o}{=} \PY{n}{vol}\PY{o}{*}\PY{n}{sqrt}\PY{p}{(}\PY{n}{ttm}\PY{p}{)}
\PY{n}{d1} \PY{o}{=} \PY{n}{d1\PYZus{}num} \PY{o}{/}\PY{n}{d1\PYZus{}den}
\PY{n}{d2} \PY{o}{=} \PY{n}{d1} \PY{o}{\PYZhy{}} \PY{n}{d1\PYZus{}den}          

\PY{n}{call\PYZus{}price} \PY{o}{=} \PY{n}{S\PYZus{}t} \PY{o}{*} \PY{n}{norm}\PY{o}{.}\PY{n}{cdf}\PY{p}{(}\PY{n}{d1}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{n}{K} \PY{o}{*} \PY{n}{exp}\PY{p}{(}\PY{o}{\PYZhy{}}\PY{n}{r}\PY{o}{*}\PY{n}{ttm}\PY{p}{)}\PY{o}{*}\PY{n}{norm}\PY{o}{.}\PY{n}{cdf}\PY{p}{(}\PY{n}{d2}\PY{p}{)}
\PY{n}{put\PYZus{}price} \PY{o}{=} \PY{o}{\PYZhy{}} \PY{n}{S\PYZus{}t} \PY{o}{*} \PY{n}{norm}\PY{o}{.}\PY{n}{cdf}\PY{p}{(}\PY{o}{\PYZhy{}}\PY{n}{d1}\PY{p}{)} \PY{o}{+} \PY{n}{K} \PY{o}{*} \PY{n}{exp}\PY{p}{(}\PY{o}{\PYZhy{}}\PY{n}{r}\PY{o}{*}\PY{n}{ttm}\PY{p}{)}\PY{o}{*}\PY{n}{norm}\PY{o}{.}\PY{n}{cdf}\PY{p}{(}\PY{o}{\PYZhy{}}\PY{n}{d2}\PY{p}{)}

\PY{n+nb}{print} \PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+si}{\PYZob{}:.3f\PYZcb{}}\PY{l+s+s2}{ }\PY{l+s+si}{\PYZob{}:.3f\PYZcb{}}\PY{l+s+s2}{\PYZdq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n}{call\PYZus{}price}\PY{p}{,} \PY{n}{put\PYZus{}price}\PY{p}{)}\PY{p}{)}

205.472 2.480
\end{Verbatim}
\end{tcolorbox}
\end{Answer}

